<!DOCTYPE html>
<html>
<head>
	<title>Rock Paper Scissors</title>
</head>
<meta charset="UTF-8">
<script type="text/javascript">
	const ROCK = "rock"; 
	const PAPER = "paper"; 
	const SCISSORS = "scissors"; 
	const WIN = true; 
	const LOSE = false; 
	const DRAW = "DRAW"; 

	function computerPlay() {
		let min = 1; 
		let max = 3; 
		let cpuAnswer = Math.floor(Math.random() * (max - min + 1)) + min;
		switch(cpuAnswer) {
			case 1 : 
				return ROCK;
			case 2 : 
				return PAPER;
			case 3 : 
				return SCISSORS; 
			default: 
				console.log("wrong number produced by cpu"); 
		}
	}

	function rpsRound(playerSelection, cpuSelection) {
		playerSelection = playerSelection.toLowerCase(); 

		if(playerSelection==cpuSelection) {
			return DRAW
		} else if(playerSelection==ROCK) {
			if(cpuSelection==SCISSORS) {
				return WIN;//"You win! Rock beats Scissors!";
			} else {
				return LOSE; //"You lose! Paper beats Rock!"; 
			}
		} else if(playerSelection==PAPER) {
			if(cpuSelection==ROCK) {
				return WIN; //"You win! Paper beats Rock!"; 
			} else {
				return LOSE; //"You lose! Scissors beats Paper!"; 
			}
		} else if(playerSelection==SCISSORS) {
			if(cpuSelection==ROCK) {
				return LOSE; //"You lose! Rock beats Scissors!"; 
			} else {
				return WIN; //"You win! Scissors beats Paper!"; 
			}
		} else {
			console.log("SOMETHING WENT WRONG AND THE CPU/PLAYER VALUES AREN'T AS EXPECTED"); 
			return; 
		}

	}

	function game() {
		let totalGames = 5; 
		let wins = 0; 
		let losses = 0; 
		let roundNum = (totalGames+1 - totalGames); 
		while(roundNum <= totalGames) {
			let pAnswer = prompt("Round " + roundNum + " of " + totalGames + "! Do you choose Rock, Paper, or Scissors?").toLowerCase(); 
			if(pAnswer!= ROCK &&
				pAnswer != PAPER &&
				pAnswer != SCISSORS) {
				alert("Hmm... I don't recognize your input. Try again!"); 
				continue; 
			}
			let cpuAnswer = computerPlay(); 
			let result = rpsRound(pAnswer, cpuAnswer); 
			if(result==WIN) {
				wins++; 
				alert("You win! " + pAnswer.charAt(0).toUpperCase() + pAnswer.substring(1) + " beats " + cpuAnswer.charAt(0).toUpperCase() + cpuAnswer.substring(1) + "! Score is: " + wins + "-" + losses ); 
			} else if (result==LOSE) {
				losses++; 
				alert("You lose! " + cpuAnswer.charAt(0).toUpperCase() + cpuAnswer.substring(1) + " beats " + pAnswer.charAt(0).toUpperCase()+ pAnswer.substring(1)  + "! Wins: " + wins + " Losses: " + losses ); 
			} else if( result==DRAW) {
				alert("It's a draw! NOBODY WINS!"); 
				//on a draw, continue the loop without counting the round
				continue; 
			}

			roundNum++;

		}

		alert("FINAL SCORE - YOU: " + wins + " CPU: " + losses);
	}

	game(); 

</script>
<body>

</body>
</html>